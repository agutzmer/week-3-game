<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Game 1</title>
	<link rel="stylesheet" type="text/css" href="../assets/reset.css">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme 
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">  -->

<!-- bootswatch space lab  -->
	<link rel="stylesheet" type="text/css" href="../assets/_bootswatch.scss">
	<link rel="stylesheet" type="text/css" href="../assets/style.css">
</head>

<body>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<div class="wrapper">

<!-- prompts -->
	<section id="title">
			<h1>Guess the NFL team I'm thinking of (or check the console log).</h1>
	</section>

  <section id="team">
    <p id="teamDisplay"</p>
  </section>

  <section id="feedback">
    <p id="feedbackDisplay"</p>
    <p id="missCountDisplay"</p>
   </section>

<script>
//
// Begin functions
//
//
// Check if a correct letter was entered
//
function checkCorrectLetter (teamName, userInput ) {	
		if ( teamName.toLowerCase().indexOf (userInput) == -1)  {
		return (false);
		}
		else {
		return (true);
	}	
}
//
// Check if the complete string has been entered correctly
//
function checkCorrectAnswer( teamName, teamNameDisplay) {
	correctFlag = true;
	for (i=0; i < teamName.length; i++) {	
		if (teamName.charAt(i).toLowerCase() != teamNameDisplay.charAt(i * 2).toLowerCase()) {
			correctFlag = false;
			break;
		}
	}
	return (correctFlag);
}
//
// Build the inputted character into the displayed string
//
function replaceDisplayCharacter( teamName, teamNameDisplay, userInput) {
	var updatedName = "";	
	
	for (i = 0; i < teamName.length; i++) {
		if (teamName.toLowerCase().charAt(i) == userInput) {
			updatedName = updatedName + userInput;
			updatedName = updatedName + " ";		
		}
		else {
			updatedName = updatedName + teamNameDisplay.charAt (i*2);
			updatedName = updatedName + " ";
		}	
	}
    return updatedName;            
}
//
//  String array and the method to select a string randomly
//
var nflTeams = {teams:["Ravens", "Bengals", "Browns", "Steelers", "Texans", "Colts", "Jaguars", "Titans", "Bills", "Dolphins", "Patriots", "Jets", "Patriots", "Jets", "Broncos", "Chiefs", "Raiders", "Chargers", "Packers", "Bears", "Vikings", "Lions", "Falcons", "Saints", "Panthers", "Buccaneers", "Cowboys", "Giants", "Eagles", "Redskins", "Cardinals", "Rams", "49ers", "Seahawks" ],
		chooseRandomTeam: function () {
			randomNFLIndex = Math.floor((Math.random() * this.teams.length) ); 
			teamName = this.teams [ randomNFLIndex ];			
			return (teamName);
			}};
//
// Begin interaction
//
	var teamName;
	var randomNFLIndex;
	var teamNameDisplay="";
	var feedbackDisplay="";
	var missCountDisplay="";
	var misses = 0;
	var correctLetter = false;
	var correctAnswer = false;
	var correctFeedbackString;

	teamName = nflTeams.chooseRandomTeam ();
	console.log (teamName);
	
	for (i = 0; i < teamName.length; i++) {
		teamNameDisplay = teamNameDisplay + "_";
		teamNameDisplay = teamNameDisplay + " ";		
	}	
	document.getElementById("teamDisplay").innerHTML = teamNameDisplay;	
//
//Begin game loop
//
	document.onkeyup = function(event) {
	
		document.getElementById("teamDisplay").innerHTML = teamNameDisplay;	

		if (misses == 0) {
			document.getElementById("missCountDisplay").innerHTML = " ";
		}
		
    	var userInput = String.fromCharCode(event.keyCode).toLowerCase();    		
    	correctLetter = checkCorrectLetter (teamName, userInput);

    	if (correctLetter) {
			teamNameDisplay = replaceDisplayCharacter( teamName, teamNameDisplay, userInput);	
			document.getElementById("teamDisplay").innerHTML = teamNameDisplay;	

			correctAnswer = checkCorrectAnswer( teamName, teamNameDisplay);
			feedbackDisplay = "";
			document.getElementById("feedbackDisplay").innerHTML = "The team name has a the letter " + userInput + "!";
			}
		else {
			feedbackDisplay = "";
			document.getElementById("feedbackDisplay").innerHTML = "The team name does not have the letter " + userInput + ".";

      		misses++;
      		missCountDisplay = "";
			document.getElementById("missCountDisplay").innerHTML = "You have " + misses + " incorrect attempts.";
      	}   	
//
// User got it correct
//
	if (correctAnswer == true) {
			
			correctFeedbackString = "You are correct!    It's the " + teamName + "!  Let's go again!";

			feedbackDisplay = "";
			document.getElementById("feedbackDisplay").innerHTML = correctFeedbackString;

      		missCountDisplay = "";
			document.getElementById("missCountDisplay").innerHTML = "You had " + misses + " incorrect attempts.";
//
// Select a new team, reset the counters, and continue playing
//
			teamName = nflTeams.chooseRandomTeam ();
			console.log (teamName);
			teamNameDisplay = "";
			misses = 0;
			correctAnswer = false;
	
			for (i = 0; i < teamName.length; i++) {
				teamNameDisplay = teamNameDisplay + "_";
				teamNameDisplay = teamNameDisplay + " ";		
			}	
			document.getElementById("teamDisplay").innerHTML = teamNameDisplay;		

		}
	}   
</script>
</div>
</body>
</html>
